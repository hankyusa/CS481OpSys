<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-alpha/dist/katex.min.css" integrity="sha384-BTL0nVi8DnMrNdMQZG1Ww6yasK9ZGnUxL1ZWukXQ7fygA1py52yPp9W4wrR00VML" crossorigin="anonymous">
        <style>
/*--------------------------------------------------------------------------------------------- * Copyright (c) Microsoft Corporation. All rights reserved. * Licensed under the MIT License. See License.txt in the project root for license information. *--------------------------------------------------------------------------------------------*/ body { font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback"; font-size: 14px; padding: 0 26px; line-height: 22px; word-wrap: break-word; } #code-csp-warning { position: fixed; top: 0; right: 0; color: white; margin: 16px; text-align: center; font-size: 12px; font-family: sans-serif; background-color:#444444; cursor: pointer; padding: 6px; box-shadow: 1px 1px 1px rgba(0,0,0,.25); } #code-csp-warning:hover { text-decoration: none; background-color:#007acc; box-shadow: 2px 2px 2px rgba(0,0,0,.25); } body.scrollBeyondLastLine { margin-bottom: calc(100vh - 22px); } body.showEditorSelection .code-line { position: relative; } body.showEditorSelection .code-active-line:before, body.showEditorSelection .code-line:hover:before { content: ""; display: block; position: absolute; top: 0; left: -12px; height: 100%; } body.showEditorSelection li.code-active-line:before, body.showEditorSelection li.code-line:hover:before { left: -30px; } .vscode-light.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(0, 0, 0, 0.15); } .vscode-light.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(0, 0, 0, 0.40); } .vscode-light.showEditorSelection .code-line .code-line:hover:before { border-left: none; } .vscode-dark.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 255, 255, 0.4); } .vscode-dark.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 255, 255, 0.60); } .vscode-dark.showEditorSelection .code-line .code-line:hover:before { border-left: none; } .vscode-high-contrast.showEditorSelection .code-active-line:before { border-left: 3px solid rgba(255, 160, 0, 0.7); } .vscode-high-contrast.showEditorSelection .code-line:hover:before { border-left: 3px solid rgba(255, 160, 0, 1); } .vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before { border-left: none; } img { max-width: 100%; max-height: 100%; } a { text-decoration: none; } a:hover { text-decoration: underline; } a:focus, input:focus, select:focus, textarea:focus { outline: 1px solid -webkit-focus-ring-color; outline-offset: -1px; } hr { border: 0; height: 2px; border-bottom: 2px solid; } h1 { padding-bottom: 0.3em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; } h1, h2, h3 { font-weight: normal; } h1 code, h2 code, h3 code, h4 code, h5 code, h6 code { font-size: inherit; line-height: auto; } table { border-collapse: collapse; } table > thead > tr > th { text-align: left; border-bottom: 1px solid; } table > thead > tr > th, table > thead > tr > td, table > tbody > tr > th, table > tbody > tr > td { padding: 5px 10px; } table > tbody > tr + tr > td { border-top: 1px solid; } blockquote { margin: 0 7px 0 5px; padding: 0 16px 0 10px; border-left-width: 5px; border-left-style: solid; } code { font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback"; font-size: 14px; line-height: 19px; } body.wordWrap pre { white-space: pre-wrap; } .mac code { font-size: 12px; line-height: 18px; } pre:not(.hljs), pre.hljs code > div { padding: 16px; border-radius: 3px; overflow: auto; } /** Theming */ pre code { color: var(--vscode-editor-foreground); } .vscode-light pre:not(.hljs), .vscode-light code > div { background-color: rgba(220, 220, 220, 0.4); } .vscode-dark pre:not(.hljs), .vscode-dark code > div { background-color: rgba(10, 10, 10, 0.4); } .vscode-high-contrast pre:not(.hljs), .vscode-high-contrast code > div { background-color: rgb(0, 0, 0); } .vscode-high-contrast h1 { border-color: rgb(0, 0, 0); } .vscode-light table > thead > tr > th { border-color: rgba(0, 0, 0, 0.69); } .vscode-dark table > thead > tr > th { border-color: rgba(255, 255, 255, 0.69); } .vscode-light h1, .vscode-light hr, .vscode-light table > tbody > tr + tr > td { border-color: rgba(0, 0, 0, 0.18); } .vscode-dark h1, .vscode-dark hr, .vscode-dark table > tbody > tr + tr > td { border-color: rgba(255, 255, 255, 0.18); } 
</style>
<style>
/* Tomorrow Theme */ /* http://jmblog.github.com/color-themes-for-google-code-highlightjs */ /* Original theme - https://github.com/chriskempson/tomorrow-theme */ /* Tomorrow Comment */ .hljs-comment, .hljs-quote { color: #8e908c; } /* Tomorrow Red */ .hljs-variable, .hljs-template-variable, .hljs-tag, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-regexp, .hljs-deletion { color: #c82829; } /* Tomorrow Orange */ .hljs-number, .hljs-built_in, .hljs-builtin-name, .hljs-literal, .hljs-type, .hljs-params, .hljs-meta, .hljs-link { color: #f5871f; } /* Tomorrow Yellow */ .hljs-attribute { color: #eab700; } /* Tomorrow Green */ .hljs-string, .hljs-symbol, .hljs-bullet, .hljs-addition { color: #718c00; } /* Tomorrow Blue */ .hljs-title, .hljs-section { color: #4271ae; } /* Tomorrow Purple */ .hljs-keyword, .hljs-selector-tag { color: #8959a8; } .hljs { display: block; overflow-x: auto; color: #4d4d4c; padding: 0.5em; } .hljs-emphasis { font-style: italic; } .hljs-strong { font-weight: bold; }
</style>
<style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'HelveticaNeue-Light', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.2;
            }
        </style>
    </head>
    <body>
        <h1 id="operating-systems-programming-assignment-1">Operating Systems Programming Assignment 1</h1>
<p>By Luke Hanks <a href="mailto:hanksl@unm.edu">hanksl@unm.edu</a></p>
<h2 id="part-1-strace-a-small-program">Part 1 STRACE a small program</h2>
<blockquote>
<p>Create your own program in C as follows:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
   FILE *fd;
   <span class="hljs-keyword">float</span> pval = <span class="hljs-number">3.14159</span>;
   <span class="hljs-keyword">int</span> i, k;
   <span class="hljs-keyword">if</span> ((fd = fopen(<span class="hljs-string">"myTstFile"</span>, <span class="hljs-string">"r+"</span>)) == <span class="hljs-literal">NULL</span>)
       <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n Program Failed, figure out why...\n"</span>);
   <span class="hljs-keyword">else</span>
   {
       <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n Simple pie value %1.8f\n"</span>, pval);
       <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
       {
           k = rand() % <span class="hljs-number">10</span>;
           <span class="hljs-keyword">if</span> (<span class="hljs-built_in">fprintf</span>(fd, <span class="hljs-string">"%f\n"</span>, pval + i * k) == <span class="hljs-number">-1</span>)
               perror(<span class="hljs-string">"write err"</span>);
           fflush(fd);
           <span class="hljs-built_in">printf</span>(<span class="hljs-string">"."</span>);
           fflush(<span class="hljs-built_in">stdout</span>);
       }
       fclose(fd);
       <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n Program successful ends\n"</span>);
   }
}
</div></code></pre>
<p>a. Without creating file <em>myTstFile</em> (no such a file in your working directory), run “strace yourCode”, read your output, pick the first five of most frequently invoked system calls and explain which among the five system calls caused the program to fail.</p>
</blockquote>
<p>Most called system calls:</p>
<ol>
<li><code>open</code></li>
<li><code>mmap</code></li>
<li><code>mprotect</code></li>
<li><code>write</code></li>
<li><code>munmap</code></li>
</ol>
<p>I believe that <code>open</code> caused the program to fail because <em>myTstFile</em> isn't in the working directory.</p>
<blockquote>
<p>b. With file myTstFile (a dummy file) being created, run “strace yourCode” again, read your output to pick the most frequently invoked system call.</p>
</blockquote>
<p>Most frequently invoked system call is <code>write</code>.</p>
<blockquote>
<p>c. Is “fopen” a system call? If not, which system call it mainly correlates with?</p>
</blockquote>
<p><code>fopen</code> is not a system call. It is most correlated with the <code>open</code> system call.</p>
<blockquote>
<p>d. Is “printf” a system call? If not, which system call it mainly correlates with?</p>
</blockquote>
<p><code>fprint</code> is not a system call. It is most correlated with the <code>write</code> system call.</p>
<h2 id="part-2-strace-a-linux-utility-command----cal">Part 2 STRACE a Linux utility command -- cal</h2>
<blockquote>
<p>Run “strace –c cal”, capture the output, and
then pick the top three system calls which consumed the system time and briefly describe their
functionality.</p>
</blockquote>
<ol>
<li><code>write</code> is used to write to a file or to the terminal.</li>
<li><code>mmap</code> is used to map some number of bytes into memory.</li>
<li><code>open</code> is used to open files.</li>
</ol>
<h2 id="part-3-straceltrace-linux-utility-commands-ls">Part 3 STRACE/LTRACE Linux utility commands “ls”</h2>
<blockquote>
<p>Command ltrace is another tracing tool used for tracing the library function calls. Use both strace and ltrace to Linux command ls to report what library functions and system calls are used to:</p>
<p>a. Open the current directory</p>
</blockquote>
<ul>
<li>Library call: <code>opendir</code></li>
<li>System call: <code>open</code></li>
</ul>
<blockquote>
<p>b. Get the list of directory entries</p>
</blockquote>
<ul>
<li>Library call: <code>readdir</code></li>
<li>System call: <code>read</code></li>
</ul>
<blockquote>
<p>c. Print the output to your screen</p>
</blockquote>
<ul>
<li>Library call: <code>strcoll</code></li>
<li>System call: <code>write</code></li>
</ul>

<footer>
    <p>By Luke Hanks <a href="mailto:hanksl@unm.edu">hanksl@unm.edu</a></p>
</footer>

    </body>
    </html>